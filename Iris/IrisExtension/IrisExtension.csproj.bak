<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <RootNamespace>IrisExtension</RootNamespace>
    <AssemblyName>IrisExtension</AssemblyName>
    <TargetFramework>netstandard2.0</TargetFramework>

    <VsdConfigFile>$(OutputPath)IrisExtension.vsdconfig</VsdConfigFile>

    <!-- VSIX Options -->
    <UseCodebase>true</UseCodebase>
    <GeneratePkgDefFile>false</GeneratePkgDefFile>
    <IncludeAssemblyInVSIXContainer>true</IncludeAssemblyInVSIXContainer>
    <IncludeDebugSymbolsInVSIXContainer>false</IncludeDebugSymbolsInVSIXContainer>
    <IncludeDebugSymbolsInLocalVSIXDeployment>false</IncludeDebugSymbolsInLocalVSIXDeployment>
    <CopyBuildOutputToOutputDirectory>true</CopyBuildOutputToOutputDirectory>
    <CopyOutputSymbolsToOutputDirectory>true</CopyOutputSymbolsToOutputDirectory>
  </PropertyGroup>
  <PropertyGroup>
    <VsdConfigFile>$(OutputPath)IrisExtension.vsdconfig</VsdConfigFile>
  </PropertyGroup>
  <PropertyGroup>
    <StartAction>Program</StartAction>
    <StartProgram Condition="'$(DevEnvDir)' != ''">$(DevEnvDir)devenv.exe</StartProgram>
    <StartArguments>/rootsuffix Exp</StartArguments>
    <DebugEngines>{FB0D4648-F776-4980-95F8-BB7F36EBC1EE}</DebugEngines>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.VisualStudio.Debugger.Engine" Version="16.4.1111102" />
    <PackageReference Include="Microsoft.VisualStudio.Debugger.Metadata" Version="16.4.1111102" />
    <PackageReference Include="Microsoft.VSSDK.Debugger.VSDConfigTool" Version="16.4.1111102">
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.VSSDK.BuildTools" Version="16.8.3038" GeneratePathProperty="true"  />
  </ItemGroup>
    <ItemGroup>
    <Content Include="Iris.pkgdef">
      <IncludeInVSIX>true</IncludeInVSIX>
    </Content>
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\IrisCompiler\IrisCompiler.csproj" />
  </ItemGroup>
  <ItemGroup>
    <VSIXSourceItem Include="$(VsdConfigFile)">
      <VSIXSubPath>$(AssemblyVSIXSubPath)</VSIXSubPath>
    </VSIXSourceItem>
  </ItemGroup>
  <ItemGroup>
    <VsdConfigXmlFiles Include="ExpressionCompiler\ExpressionCompiler.vsdconfigxml" />
    <VsdConfigXmlFiles Include="Formatter\Formatter.vsdconfigxml" />
    <VsdConfigXmlFiles Include="FrameDecoder\FrameDecoder.vsdconfigxml" />
  </ItemGroup>

  <!--NOTE: Microsoft.NET.Sdk is included here because Microsoft.Common.CurrentVersion.targets needs to be including before Microsoft.VsSDK.targets.-->
  <Import Sdk="Microsoft.NET.Sdk" Project="Sdk.targets" />
  <Import Project="$(VSToolsPath)\VSSDK\Microsoft.VsSDK.targets" Condition="Exists('$(VSToolsPath)\VSSDK\Microsoft.VsSDK.targets')" />

</Project>
